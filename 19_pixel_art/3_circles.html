<meta charset="utf-8"> <!-- to support icons-->
<!doctype html>
<script src="19_paint.js"></script> <!-- book editor code -->

<div></div>
<script>
    function circle(start, state, dispatch) {
        // Your code here
        function findDistance(pointA, pointB) {
            return Math.round(Math.sqrt(Math.pow(pointA.x - pointB.x, 2) + Math.pow(pointA.y - pointB.y, 2)));
        }

        function drawCircle(pos) {
            let radius = findDistance(start, pos);

            let xStart = start.x - radius;
            let yStart = start.y - radius;
            let xEnd = start.x + radius;
            let yEnd = start.y + radius;
            let drawn = [];

            // console.log({xStart, yStart, xEnd, yEnd, radius});

            for (let y = yStart; y <= yEnd; y++) {
                for (let x = xStart; x <= xEnd; x++) {
                    let distance = findDistance(start, {x, y});
                    if (distance <= radius && x >= 0 && x <= state.picture.width && y >= 0 && y <= state.picture.height) {
                        drawn.push({x, y, color: state.color});
                    }
                }
            }

            dispatch({picture: state.picture.draw(drawn)});
        }

        drawCircle(start);
        return drawCircle;
    }

    let dom = startPixelEditor({
        tools: Object.assign({}, baseTools, {circle})
    });
    document.querySelector("div").appendChild(dom);
</script>
